!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n||self).tsPattern={})}(this,function(n){function t(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function e(n,e){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=function(n,e){if(n){if("string"==typeof n)return t(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(n,e):void 0}}(n))||e&&n&&"number"==typeof n.length){r&&(n=r);var u=0;return function(){return u>=n.length?{done:!0}:{done:!1,value:n[u++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r=Symbol("@ts-pattern/matcher"),u=Symbol("@ts-pattern/isVariadic"),i="@ts-pattern/anonymous-select-key",o=function(n){return Boolean(n&&"object"==typeof n)},c=function(n){return n&&!!n[r]},f=function n(t,i,f){if(c(t)){var a=t[r]().match(i),s=a.matched,l=a.selections;return s&&l&&Object.keys(l).forEach(function(n){return f(n,l[n])}),s}if(o(t)){if(!o(i))return!1;if(Array.isArray(t)){if(!Array.isArray(i))return!1;for(var h,g=[],v=[],m=[],p=e(t.keys());!(h=p()).done;){var d=t[h.value];c(d)&&d[u]?m.push(d):m.length?v.push(d):g.push(d)}if(m.length){if(m.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(i.length<g.length+v.length)return!1;var y=i.slice(0,g.length),b=0===v.length?[]:i.slice(-v.length),w=i.slice(g.length,0===v.length?Infinity:-v.length);return g.every(function(t,e){return n(t,y[e],f)})&&v.every(function(t,e){return n(t,b[e],f)})&&(0===m.length||n(m[0],w,f))}return t.length===i.length&&t.every(function(t,e){return n(t,i[e],f)})}return Object.keys(t).every(function(e){var u,o=t[e];return(e in i||c(u=o)&&"optional"===u[r]().matcherType)&&n(o,i[e],f)})}return Object.is(i,t)},a=function n(t){var e,u,i;return o(t)?c(t)?null!=(e=null==(u=(i=t[r]()).getSelectionKeys)?void 0:u.call(i))?e:[]:Array.isArray(t)?s(t,n):s(Object.values(t),n):[]},s=function(n,t){return n.reduce(function(n,e){return n.concat(t(e))},[])};function l(){var n=[].slice.call(arguments);if(1===n.length){var t=n[0];return function(n){return f(t,n,function(){})}}if(2===n.length)return f(n[0],n[1],function(){});throw new Error("isMatching wasn't given the right number of arguments: expected 1 or 2, received "+n.length+".")}function h(n){return Object.assign(n,{optional:function(){return v(n)},and:function(t){return d(n,t)},or:function(t){return y(n,t)},select:function(t){return void 0===t?w(n):w(t,n)}})}function g(n){return Object.assign(function(n){var t;return Object.assign(n,((t={})[Symbol.iterator]=function(){/*#__PURE__*/return regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object.assign(n,((e={})[u]=!0,e));case 2:case"end":return t.stop()}},t)})()},t))}(n),{optional:function(){return g(v(n))},select:function(t){return g(void 0===t?w(n):w(t,n))}})}function v(n){var t;return h(((t={})[r]=function(){return{match:function(t){var e={},r=function(n,t){e[n]=t};return void 0===t?(a(n).forEach(function(n){return r(n,void 0)}),{matched:!0,selections:e}):{matched:f(n,t,r),selections:e}},getSelectionKeys:function(){return a(n)},matcherType:"optional"}},t))}var m=function(n,t){for(var r,u=e(n);!(r=u()).done;)if(!t(r.value))return!1;return!0},p=function(n,t){for(var r,u=e(n.entries());!(r=u()).done;){var i=r.value;if(!t(i[1],i[0]))return!1}return!0};function d(){var n,t=[].slice.call(arguments);return h(((n={})[r]=function(){return{match:function(n){var e={},r=function(n,t){e[n]=t};return{matched:t.every(function(t){return f(t,n,r)}),selections:e}},getSelectionKeys:function(){return s(t,a)},matcherType:"and"}},n))}function y(){var n,t=[].slice.call(arguments);return h(((n={})[r]=function(){return{match:function(n){var e={},r=function(n,t){e[n]=t};return s(t,a).forEach(function(n){return r(n,void 0)}),{matched:t.some(function(t){return f(t,n,r)}),selections:e}},getSelectionKeys:function(){return s(t,a)},matcherType:"or"}},n))}function b(n){var t;return(t={})[r]=function(){return{match:function(t){return{matched:Boolean(n(t))}}}},t}function w(){var n,t=[].slice.call(arguments),e="string"==typeof t[0]?t[0]:void 0,u=2===t.length?t[1]:"string"==typeof t[0]?void 0:t[0];return h(((n={})[r]=function(){return{match:function(n){var t,r=((t={})[null!=e?e:i]=n,t);return{matched:void 0===u||f(u,n,function(n,t){r[n]=t}),selections:r}},getSelectionKeys:function(){return[null!=e?e:i].concat(void 0===u?[]:a(u))}}},n))}function S(n){return"number"==typeof n}function j(n){return"string"==typeof n}function O(n){return"bigint"==typeof n}var A=h(b(function(n){return!0})),B=A,I=function n(t){return Object.assign(h(t),{startsWith:function(e){return n(d(t,(r=e,b(function(n){return j(n)&&n.startsWith(r)}))));var r},endsWith:function(e){return n(d(t,(r=e,b(function(n){return j(n)&&n.endsWith(r)}))));var r},minLength:function(e){return n(d(t,function(n){return b(function(t){return j(t)&&t.length>=n})}(e)))},maxLength:function(e){return n(d(t,function(n){return b(function(t){return j(t)&&t.length<=n})}(e)))},includes:function(e){return n(d(t,(r=e,b(function(n){return j(n)&&n.includes(r)}))));var r},regex:function(e){return n(d(t,(r=e,b(function(n){return j(n)&&Boolean(n.match(r))}))));var r}})}(b(j)),x=function(n,t){return b(function(e){return S(e)&&n<=e&&t>=e})},E=function(n){return b(function(t){return S(t)&&t<n})},K=function(n){return b(function(t){return S(t)&&t>n})},T=function(n){return b(function(t){return S(t)&&t<=n})},k=function(n){return b(function(t){return S(t)&&t>=n})},P=function(){return b(function(n){return S(n)&&Number.isInteger(n)})},_=function(){return b(function(n){return S(n)&&Number.isFinite(n)})},M=function(){return b(function(n){return S(n)&&n>0})},W=function(){return b(function(n){return S(n)&&n<0})},N=function n(t){return Object.assign(h(t),{between:function(e,r){return n(d(t,x(e,r)))},lt:function(e){return n(d(t,E(e)))},gt:function(e){return n(d(t,K(e)))},lte:function(e){return n(d(t,T(e)))},gte:function(e){return n(d(t,k(e)))},int:function(){return n(d(t,P()))},finite:function(){return n(d(t,_()))},positive:function(){return n(d(t,M()))},negative:function(){return n(d(t,W()))}})}(b(S)),z=function(n,t){return b(function(e){return O(e)&&n<=e&&t>=e})},L=function(n){return b(function(t){return O(t)&&t<n})},R=function(n){return b(function(t){return O(t)&&t>n})},U=function(n){return b(function(t){return O(t)&&t<=n})},C=function(n){return b(function(t){return O(t)&&t>=n})},F=function(){return b(function(n){return O(n)&&n>0})},J=function(){return b(function(n){return O(n)&&n<0})},V=function n(t){return Object.assign(h(t),{between:function(e,r){return n(d(t,z(e,r)))},lt:function(e){return n(d(t,L(e)))},gt:function(e){return n(d(t,R(e)))},lte:function(e){return n(d(t,U(e)))},gte:function(e){return n(d(t,C(e)))},positive:function(){return n(d(t,F()))},negative:function(){return n(d(t,J()))}})}(b(O)),$=h(b(function(n){return"boolean"==typeof n})),q=h(b(function(n){return"symbol"==typeof n})),D=h(b(function(n){return null==n})),G={__proto__:null,matcher:r,optional:v,array:function(){var n,t=[].slice.call(arguments);return g(((n={})[r]=function(){return{match:function(n){if(!Array.isArray(n))return{matched:!1};if(0===t.length)return{matched:!0};var e=t[0],r={};if(0===n.length)return a(e).forEach(function(n){r[n]=[]}),{matched:!0,selections:r};var u=function(n,t){r[n]=(r[n]||[]).concat([t])};return{matched:n.every(function(n){return f(e,n,u)}),selections:r}},getSelectionKeys:function(){return 0===t.length?[]:a(t[0])}}},n))},set:function(){var n,t=[].slice.call(arguments);return h(((n={})[r]=function(){return{match:function(n){if(!(n instanceof Set))return{matched:!1};var e={};if(0===n.size)return{matched:!0,selections:e};if(0===t.length)return{matched:!0};var r=function(n,t){e[n]=(e[n]||[]).concat([t])},u=t[0];return{matched:m(n,function(n){return f(u,n,r)}),selections:e}},getSelectionKeys:function(){return 0===t.length?[]:a(t[0])}}},n))},map:function(){var n,t=[].slice.call(arguments);return h(((n={})[r]=function(){return{match:function(n){if(!(n instanceof Map))return{matched:!1};var e={};if(0===n.size)return{matched:!0,selections:e};var r,u=function(n,t){e[n]=(e[n]||[]).concat([t])};if(0===t.length)return{matched:!0};if(1===t.length)throw new Error("`P.map` wasn't given enough arguments. Expected (key, value), received "+(null==(r=t[0])?void 0:r.toString()));var i=t[0],o=t[1];return{matched:p(n,function(n,t){var e=f(i,t,u),r=f(o,n,u);return e&&r}),selections:e}},getSelectionKeys:function(){return 0===t.length?[]:[].concat(a(t[0]),a(t[1]))}}},n))},intersection:d,union:y,not:function(n){var t;return h(((t={})[r]=function(){return{match:function(t){return{matched:!f(n,t,function(){})}},getSelectionKeys:function(){return[]},matcherType:"not"}},t))},when:b,select:w,any:A,_:B,string:I,between:x,lt:E,gt:K,lte:T,gte:k,int:P,finite:_,positive:M,negative:W,number:N,betweenBigInt:z,ltBigInt:L,gtBigInt:R,lteBigInt:U,gteBigInt:C,positiveBigInt:F,negativeBigInt:J,bigint:V,boolean:$,symbol:q,nullish:D,instanceOf:function(n){return h(b(function(n){return function(t){return t instanceof n}}(n)))},shape:function(n){return h(b(l(n)))}},H={matched:!1,value:void 0},Q=/*#__PURE__*/function(){function n(n,t){void 0===t&&(t=H),this.input=void 0,this.state=void 0,this.input=n,this.state=t}var t=n.prototype;return t.with=function(){var t=this,e=[].slice.call(arguments);if(this.state.matched)return this;var r=e[e.length-1],u=[e[0]],o=[];3===e.length&&"function"==typeof e[1]?(u.push(e[0]),o.push(e[1])):e.length>2&&u.push.apply(u,e.slice(1,e.length-1));var c={},a=Boolean(u.some(function(n){return f(n,t.input,function(n,t){c[n]=t})})&&o.every(function(n){return n(t.input)}))?{matched:!0,value:r(Object.keys(c).length?i in c?c[i]:c:this.input,this.input)}:H;return new n(this.input,a)},t.when=function(t,e){if(this.state.matched)return this;var r=Boolean(t(this.input));return new n(this.input,r?{matched:!0,value:e(this.input,this.input)}:H)},t.otherwise=function(n){return this.state.matched?this.state.value:n(this.input)},t.exhaustive=function(){return this.run()},t.run=function(){if(this.state.matched)return this.state.value;var n;try{n=JSON.stringify(this.input)}catch(t){n=this.input}throw new Error("Pattern matching error: no pattern matches value "+n)},t.returnType=function(){return this},n}();n.P=G,n.Pattern=G,n.isMatching=l,n.match=function(n){return new Q(n)}});
//# sourceMappingURL=index.umd.js.map
